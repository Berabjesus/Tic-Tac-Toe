#!/usr/bin/env ruby
require 'colorize'
require_relative '../lib/Logic.rb'

class Main
  def initialize
    @game_logic = Logic.new
    @board = @game_logic.board
    @player1 = ['X']
    @player2 = ['O']
    @current_player = @player1
    show_welcome_interface
  end

  private

  def show_welcome_interface
    divide(1)
    puts "\n\t\t\t\t Welcome to TIC-TAC-TOE \n\n"
    divide(1)
    puts "\n\n"
    show_start_options
  end

  def show_start_options
    puts 'Select an option'
    puts '1. Player vs Player'
    puts '2. Exit'.red
    choice = check_input((1..2))
    abort_game(2) if choice == 2
    clear_screen
    show_instructions
    get_players(choice)
  end

  def show_instructions
    divide(1)
    puts "\n---------------GAME INSTRUCTIONS---------------\n".on_green
    puts " ** Player one will take #{@player1[0]} and Player two will take  #{@player2[0]} \n"
  end

  def get_players
    divide(1)
    puts "\n Player 1 please Enter your name "
    print ' :-  '
    @player1.push(gets.chomp)
    puts "\nPlayer 2 please Enter your name"
    print ' :-  '
    @player2.push(gets.chomp)
    show_players
  end

  def show_players
    clear_screen
    divide(1)
    puts "\n\t\t\t\t #{@player1[1]} vs #{@player2[1]} \n\n"
    divide(1)
    display_board
  end

  def display_board(game_over = false)
    print "\n\n"
    print top = "       |       |       \n"
    puts "   #{@board[0]}   |   #{@board[1]}   |   #{@board[2]}   "
    print bottom = "_______|_______|________\n"
    print top
    print "   #{@board[3]}   |   #{@board[4]}   |   #{@board[5]}   \n"
    print bottom
    print top
    print "   #{@board[6]}   |   #{@board[7]}   |   #{@board[8]}   \n"
    print top
    update_board if game_over == false
  end
end